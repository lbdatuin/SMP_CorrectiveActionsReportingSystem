<div class="details ">
    <div class="details-header">6. FOLLOW-UP STATUS AND CLOSURE(CHECKING OF PROGRESS AND EFFECTIVENESS OF ACTIONS)</div>
     <div class="detail-2-cont">
        <div style="padding: 13px 25px;">
            <div>
                <div class="details-header-1">a. For IMS Internal Audit Findings - IMS Internal Auditor</div>
                <div class="details-header-1">b. For Health and Safety Incident/Accident & Legal Requirements - OH Officer,Safety Officer and/or Safety Inspector</div>
                <div class="details-header-1">c. For Environmental Incident/Accident & Legal Compliance Obligations - PCO and/or Environmental Engineer</div>
                <div class="details-header-1">d. For OTP & KPI, Quality related Legal Requirements & Compliance Obligations - IMS Assurance Personnel</div>
            </div>
            
        </div>
    </div>
    <div class="tbl-cont">
        <div class="row-1">
            <div class="row-header">Date</div>
            <div class="row-header">Status Of Action</div>
            <div class="row-header">Verified By</div>
        </div>
        <div class="row-2">
            The initial follow-up should occur within <span style="color: #ff3c3c;">30</span> days from the date of issuance
        </div>
        <div class="row-3">
            <div class="row-value"><input type="date" @bind="Payload.FollowUpStatus.F1Date" /></div>
            <div class="row-value">
                <div class="pa-5">
                    <ListFileUpload title="UPLOAD FILE" isActive="true" OnFilesSelected="f => F1Evidences = f.ToList()" />
                </div>
                <textarea rows="9" @bind="Payload.FollowUpStatus.F1StatusOfActions" />
            </div>
            <div class="row-value"><textarea rows="9" @bind="Payload.FollowUpStatus.F1VerifiedBy" /></div>
        </div>

        <div class="row-2">
            The 2nd follow-up should occur within <span style="color: #ff3c3c;">90</span> days from the date of issuance
        </div>
        <div class="row-3 position-relative">
            <div class="row-value"><input type="date" @bind="Payload.FollowUpStatus.F2Date" /></div>
            <div class="row-value">
                <div class="pa-5">
                    <ListFileUpload title="UPLOAD FILE" isActive="true" OnFilesSelected="f => F2Evidences = f.ToList()" />
                </div>
                <textarea rows="9" @bind="Payload.FollowUpStatus.F2StatusOfActions" />
            </div>
            <div class="row-value"><textarea rows="9" @bind="Payload.FollowUpStatus.F2VerifiedBy" /></div>
            @if (!(Payload.Status == CARStatus.DONE_FIRST_FOLLOW_UP
            || Payload.Status == CARStatus.UPLOAD_EVIDENCE_OF_SECOND_FOLLOW_UP
            || Payload.Status == CARStatus.DONE_SECOND_FOLLOW_UP
            || Payload.Status == CARStatus.UPLOAD_EVIDENCE_OF_THIRD_FOLLOW_UP
            || Payload.Status == CARStatus.DONE_THIRD_FOLLOW_UP
            || Payload.Status == CARStatus.CLOSE_EFFECTIVE
            || Payload.Status == CARStatus.CLOSE_INEFFECTIVE
            || Payload.Status == CARStatus.NOTED))
            {
                <div class="blur-overlay">
                    <div class="overlay-text">
                        <i class="fa-solid fa-lock mr-2"></i> Must Done 1st Follow Up
                    </div>
                </div>
            }
        </div>

        <div class="row-2">
            The 3rd follow-up should occur within <span style="color: #ff3c3c;">150</span> days from the date of issuance
        </div>
        <div class="row-3 position-relative">
            <div class="row-value"><input type="date" @bind="Payload.FollowUpStatus.F3Date" /></div>
            <div class="row-value">
                <div class="pa-5">
                    <ListFileUpload title="UPLOAD FILE" isActive="true" OnFilesSelected="f => F3Evidences = f.ToList()" />
                </div>
                <textarea rows="9" @bind="Payload.FollowUpStatus.F3StatusOfActions" />
            </div>
            @if (!(Payload.Status == CARStatus.DONE_SECOND_FOLLOW_UP
                || Payload.Status == CARStatus.UPLOAD_EVIDENCE_OF_THIRD_FOLLOW_UP
                || Payload.Status == CARStatus.DONE_THIRD_FOLLOW_UP
                || Payload.Status == CARStatus.CLOSE_EFFECTIVE
                || Payload.Status == CARStatus.CLOSE_INEFFECTIVE
                || Payload.Status == CARStatus.NOTED))
            {
                <div class="blur-overlay">
                    <div class="overlay-text"><i class="fa-solid fa-lock mr-2"></i> Must Done 2nd Follow Up</div>
                </div>
            }
            <div class="row-value"><textarea rows="9" @bind="Payload.FollowUpStatus.F3VerifiedBy" /></div>
        </div>

    </div>
</div>
@code {

    [Parameter] public CreateCARHeaderDTO Payload { get; set; } = new CreateCARHeaderDTO();

    private List<IBrowserFile> F1Evidences = new();
    private List<IBrowserFile> F2Evidences = new();
    private List<IBrowserFile> F3Evidences = new();

    // Expose these to parent so it can upload during Submit
    public List<IBrowserFile> GetF1Evidences() => F1Evidences;
    public List<IBrowserFile> GetF2Evidences() => F2Evidences;
    public List<IBrowserFile> GetF3Evidences() => F3Evidences;


}
